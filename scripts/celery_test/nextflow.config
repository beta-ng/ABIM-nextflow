aws {
    client {
        endpoint = 'http://abim-minio.abim.svc.cluster.local:9000'
        s3PathStyleAccess = true
    }
}

workDir = '/work'

profiles {
    k8s {
        process.executor = 'k8s'
        process.container = 'ubuntu:22.04'
        
        k8s.namespace = 'abim'

        storageClaimName = System.getenv('K8S_PVC_NAME') ?: 'this-will-fail-if-not-set'
        storageMountPath = '/work'

        process.pod = [
            [ label: 'run_id', value: params.run_id ?: System.getenv('RUN_ID') ]
        ]
    }

    local {
        process.executor = 'local'
    }
}
